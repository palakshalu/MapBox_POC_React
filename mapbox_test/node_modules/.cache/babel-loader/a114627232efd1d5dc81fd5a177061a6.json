{"ast":null,"code":"'use strict';\n\nimport Typeahead from 'suggestions';\nimport debounce from 'lodash.debounce';\nimport { EventEmitter } from 'events';\nimport utils from '../utils'; // Geocoder - this slightly mimicks the mapboxl-gl-geocoder but isn't an exact replica.\n// Once gl-js plugins can be added to custom divs, we should be able to require mapbox-gl-geocoder\n// instead of including it here\n\nexport default class Geocoder {\n  constructor(options) {\n    this._ev = new EventEmitter();\n    this.options = options;\n    this.api = options && options.api || 'https://api.mapbox.com/geocoding/v5/mapbox.places/';\n  }\n\n  onAdd(map) {\n    this._map = map;\n    this.request = new XMLHttpRequest(); // Template\n\n    var el = document.createElement('div');\n    el.className = 'mapboxgl-ctrl-geocoder';\n    var icon = document.createElement('span');\n    icon.className = 'geocoder-icon geocoder-icon-search';\n    var input = this._inputEl = document.createElement('input');\n    input.type = 'text';\n    input.placeholder = this.options.placeholder;\n    input.addEventListener('keydown', debounce(function (e) {\n      if (!e.target.value) return this._clearEl.classList.remove('active'); // TAB, ESC, LEFT, RIGHT, ENTER, UP, DOWN\n\n      if (e.metaKey || [9, 27, 37, 39, 13, 38, 40].indexOf(e.keyCode) !== -1) return;\n\n      this._queryFromInput(e.target.value);\n    }.bind(this)), 200);\n    input.addEventListener('change', function (e) {\n      if (e.target.value) this._clearEl.classList.add('active');\n      var selected = this._typeahead.selected;\n\n      if (selected) {\n        if (this.options.flyTo) {\n          if (selected.bbox && selected.context && selected.context.length <= 3 || selected.bbox && !selected.context) {\n            var bbox = selected.bbox;\n            map.fitBounds([[bbox[0], bbox[1]], [bbox[2], bbox[3]]]);\n          } else {\n            map.flyTo({\n              center: selected.center,\n              zoom: this.options.zoom\n            });\n          }\n        }\n\n        this._input = selected;\n        this.fire('result', {\n          result: selected\n        });\n      }\n    }.bind(this));\n    var actions = document.createElement('div');\n    actions.classList.add('geocoder-pin-right');\n    var clear = this._clearEl = document.createElement('button');\n    clear.className = 'geocoder-icon geocoder-icon-close';\n    clear.addEventListener('click', this._clear.bind(this));\n    var loading = this._loadingEl = document.createElement('span');\n    loading.className = 'geocoder-icon geocoder-icon-loading';\n    actions.appendChild(clear);\n    actions.appendChild(loading);\n    el.appendChild(icon);\n    el.appendChild(input);\n    el.appendChild(actions); // Override the control being added to control containers\n\n    if (this.options.container) this.options.position = false;\n    this._typeahead = new Typeahead(input, [], {\n      filter: false\n    });\n\n    this._typeahead.getItemValue = function (item) {\n      return item.place_name;\n    };\n\n    return el;\n  }\n\n  _geocode(q, callback) {\n    this._loadingEl.classList.add('active');\n\n    this.fire('loading');\n    const geocodingOptions = this.options;\n    const exclude = ['placeholder', 'zoom', 'flyTo', 'accessToken'];\n    const options = Object.keys(this.options).filter(function (key) {\n      return exclude.indexOf(key) === -1;\n    }).map(function (key) {\n      return key + '=' + geocodingOptions[key];\n    });\n    var accessToken = this.options.accessToken ? this.options.accessToken : mapboxgl.accessToken;\n    options.push('access_token=' + accessToken);\n    this.request.abort();\n    this.request.open('GET', this.api + encodeURIComponent(q.trim()) + '.json?' + options.join('&'), true);\n\n    this.request.onload = function () {\n      this._loadingEl.classList.remove('active');\n\n      if (this.request.status >= 200 && this.request.status < 400) {\n        var data = JSON.parse(this.request.responseText);\n\n        if (data.features.length) {\n          this._clearEl.classList.add('active');\n        } else {\n          this._clearEl.classList.remove('active');\n\n          this._typeahead.selected = null;\n        }\n\n        this.fire('results', {\n          results: data.features\n        });\n\n        this._typeahead.update(data.features);\n\n        return callback(data.features);\n      } else {\n        this.fire('error', {\n          error: JSON.parse(this.request.responseText).message\n        });\n      }\n    }.bind(this);\n\n    this.request.onerror = function () {\n      this._loadingEl.classList.remove('active');\n\n      this.fire('error', {\n        error: JSON.parse(this.request.responseText).message\n      });\n    }.bind(this);\n\n    this.request.send();\n  }\n\n  _queryFromInput(q) {\n    q = q.trim();\n    if (!q) this._clear();\n\n    if (q.length > 2) {\n      this._geocode(q, function (results) {\n        this._results = results;\n      }.bind(this));\n    }\n  }\n\n  _change() {\n    var onChange = document.createEvent('HTMLEvents');\n    onChange.initEvent('change', true, false);\n\n    this._inputEl.dispatchEvent(onChange);\n  }\n\n  _query(input) {\n    if (!input) return;\n\n    if (typeof input === 'object' && input.length) {\n      input = [utils.wrap(input[0]), utils.wrap(input[1])].join();\n    }\n\n    this._geocode(input, function (results) {\n      if (!results.length) return;\n      var result = results[0];\n      this._results = results;\n      this._typeahead.selected = result;\n      this._inputEl.value = result.place_name;\n\n      this._change();\n    }.bind(this));\n  }\n\n  _setInput(input) {\n    if (!input) return;\n\n    if (typeof input === 'object' && input.length) {\n      input = [utils.roundWithOriginalPrecision(utils.wrap(input[0]), input[0]), utils.roundWithOriginalPrecision(utils.wrap(input[1]), input[1])].join();\n    } // Set input value to passed value and clear everything else.\n\n\n    this._inputEl.value = input;\n    this._input = null;\n    this._typeahead.selected = null;\n\n    this._typeahead.clear();\n\n    this._change();\n  }\n\n  _clear() {\n    this._input = null;\n    this._inputEl.value = '';\n    this._typeahead.selected = null;\n\n    this._typeahead.clear();\n\n    this._change();\n\n    this._inputEl.focus();\n\n    this._clearEl.classList.remove('active');\n\n    this.fire('clear');\n  }\n\n  getResult() {\n    return this._input;\n  }\n  /**\n   * Set & query the input\n   * @param {Array|String} query An array of coordinates [lng, lat] or location name as a string.\n   * @returns {Geocoder} this\n   */\n\n\n  query(query) {\n    this._query(query);\n\n    return this;\n  }\n  /**\n   * Set input\n   * @param {Array|String} value An array of coordinates [lng, lat] or location name as a string. Calling this function just sets the input and does not trigger an API request.\n   * @returns {Geocoder} this\n   */\n\n\n  setInput(value) {\n    this._setInput(value);\n\n    return this;\n  }\n  /**\n   * Subscribe to events that happen within the plugin.\n   * @param {String} type name of event. Available events and the data passed into their respective event objects are:\n   *\n   * - __clear__ `Emitted when the input is cleared`\n   * - __loading__ `Emitted when the geocoder is looking up a query`\n   * - __results__ `{ results } Fired when the geocoder returns a response`\n   * - __result__ `{ result } Fired when input is set`\n   * - __error__ `{ error } Error as string`\n   * @param {Function} fn function that's called when the event is emitted.\n   * @returns {Geocoder} this;\n   */\n\n\n  on(type, fn) {\n    this._ev.on(type, fn);\n\n    this._ev.on('error', function (err) {\n      console.log(err);\n    });\n\n    return this;\n  }\n  /**\n   * Fire an event\n   * @param {String} type event name.\n   * @param {Object} data event data to pass to the function subscribed.\n   * @returns {Geocoder} this\n   */\n\n\n  fire(type, data) {\n    this._ev.emit(type, data);\n\n    return this;\n  }\n  /**\n   * Remove an event\n   * @returns {Geocoder} this\n   * @param {String} type Event name.\n   * @param {Function} fn Function that should unsubscribe to the event emitted.\n   */\n\n\n  off(type, fn) {\n    this._ev.removeListener(type, fn);\n\n    return this;\n  }\n\n}\n;","map":{"version":3,"names":["Typeahead","debounce","EventEmitter","utils","Geocoder","constructor","options","_ev","api","onAdd","map","_map","request","XMLHttpRequest","el","document","createElement","className","icon","input","_inputEl","type","placeholder","addEventListener","e","target","value","_clearEl","classList","remove","metaKey","indexOf","keyCode","_queryFromInput","bind","add","selected","_typeahead","flyTo","bbox","context","length","fitBounds","center","zoom","_input","fire","result","actions","clear","_clear","loading","_loadingEl","appendChild","container","position","filter","getItemValue","item","place_name","_geocode","q","callback","geocodingOptions","exclude","Object","keys","key","accessToken","mapboxgl","push","abort","open","encodeURIComponent","trim","join","onload","status","data","JSON","parse","responseText","features","results","update","error","message","onerror","send","_results","_change","onChange","createEvent","initEvent","dispatchEvent","_query","wrap","_setInput","roundWithOriginalPrecision","focus","getResult","query","setInput","on","fn","err","console","log","emit","off","removeListener"],"sources":["C:/Users/Surface-Pro/React/mapbox_test/node_modules/@mapbox/mapbox-gl-directions/src/controls/geocoder.js"],"sourcesContent":["'use strict';\n\nimport Typeahead from 'suggestions';\nimport debounce from 'lodash.debounce';\nimport { EventEmitter } from 'events';\nimport utils from '../utils';\n\n// Geocoder - this slightly mimicks the mapboxl-gl-geocoder but isn't an exact replica.\n// Once gl-js plugins can be added to custom divs, we should be able to require mapbox-gl-geocoder\n// instead of including it here\n\nexport default class Geocoder {\n  constructor(options) {\n    this._ev = new EventEmitter();\n    this.options = options;\n    this.api = options && options.api || 'https://api.mapbox.com/geocoding/v5/mapbox.places/';\n  }\n\n  onAdd(map) {\n    this._map = map;\n\n    this.request = new XMLHttpRequest();\n\n    // Template\n    var el = document.createElement('div');\n    el.className = 'mapboxgl-ctrl-geocoder';\n\n    var icon = document.createElement('span');\n    icon.className = 'geocoder-icon geocoder-icon-search';\n\n    var input = this._inputEl = document.createElement('input');\n    input.type = 'text';\n    input.placeholder = this.options.placeholder;\n\n    input.addEventListener('keydown', debounce(function(e) {\n      if (!e.target.value) return this._clearEl.classList.remove('active');\n\n      // TAB, ESC, LEFT, RIGHT, ENTER, UP, DOWN\n      if (e.metaKey || [9, 27, 37, 39, 13, 38, 40].indexOf(e.keyCode) !== -1) return;\n      this._queryFromInput(e.target.value);\n    }.bind(this)), 200);\n\n    input.addEventListener('change', function(e) {\n      if (e.target.value) this._clearEl.classList.add('active');\n\n      var selected = this._typeahead.selected;\n      if (selected) {\n        if (this.options.flyTo) {\n          if (selected.bbox && selected.context && selected.context.length <= 3 ||\n              selected.bbox && !selected.context) {\n            var bbox = selected.bbox;\n            map.fitBounds([[bbox[0], bbox[1]],[bbox[2], bbox[3]]]);\n          } else {\n            map.flyTo({\n              center: selected.center,\n              zoom: this.options.zoom\n            });\n          }\n        }\n        this._input = selected;\n        this.fire('result', { result: selected });\n      }\n    }.bind(this));\n\n    var actions = document.createElement('div');\n    actions.classList.add('geocoder-pin-right');\n\n    var clear = this._clearEl = document.createElement('button');\n    clear.className = 'geocoder-icon geocoder-icon-close';\n    clear.addEventListener('click', this._clear.bind(this));\n\n    var loading = this._loadingEl = document.createElement('span');\n    loading.className = 'geocoder-icon geocoder-icon-loading';\n\n    actions.appendChild(clear);\n    actions.appendChild(loading);\n\n    el.appendChild(icon);\n    el.appendChild(input);\n    el.appendChild(actions);\n\n    // Override the control being added to control containers\n    if (this.options.container) this.options.position = false;\n\n    this._typeahead = new Typeahead(input, [], { filter: false });\n    this._typeahead.getItemValue = function(item) { return item.place_name; };\n\n    return el;\n  }\n\n  _geocode(q, callback) {\n    this._loadingEl.classList.add('active');\n    this.fire('loading');\n\n    const geocodingOptions = this.options\n    const exclude = ['placeholder', 'zoom', 'flyTo', 'accessToken'];\n    const options = Object.keys(this.options).filter(function(key) {\n      return exclude.indexOf(key) === -1;\n    }).map(function(key) {\n      return key + '=' + geocodingOptions[key];\n    });\n\n    var accessToken = this.options.accessToken ? this.options.accessToken : mapboxgl.accessToken;\n    options.push('access_token=' + accessToken);\n    this.request.abort();\n    this.request.open('GET', this.api + encodeURIComponent(q.trim()) + '.json?' + options.join('&'), true);\n    this.request.onload = function() {\n      this._loadingEl.classList.remove('active');\n      if (this.request.status >= 200 && this.request.status < 400) {\n        var data = JSON.parse(this.request.responseText);\n        if (data.features.length) {\n          this._clearEl.classList.add('active');\n        } else {\n          this._clearEl.classList.remove('active');\n          this._typeahead.selected = null;\n        }\n\n        this.fire('results', { results: data.features });\n        this._typeahead.update(data.features);\n        return callback(data.features);\n      } else {\n        this.fire('error', { error: JSON.parse(this.request.responseText).message });\n      }\n    }.bind(this);\n\n    this.request.onerror = function() {\n      this._loadingEl.classList.remove('active');\n      this.fire('error', { error: JSON.parse(this.request.responseText).message });\n    }.bind(this);\n\n    this.request.send();\n  }\n\n  _queryFromInput(q) {\n    q = q.trim();\n    if (!q) this._clear();\n    if (q.length > 2) {\n      this._geocode(q, function(results) {\n        this._results = results;\n      }.bind(this));\n    }\n  }\n\n  _change() {\n    var onChange = document.createEvent('HTMLEvents');\n    onChange.initEvent('change', true, false);\n    this._inputEl.dispatchEvent(onChange);\n  }\n\n  _query(input) {\n    if (!input) return;\n    if (typeof input === 'object' && input.length) {\n      input = [\n        utils.wrap(input[0]),\n        utils.wrap(input[1])\n      ].join();\n    }\n\n    this._geocode(input, function(results) {\n      if (!results.length) return;\n      var result = results[0];\n      this._results = results;\n      this._typeahead.selected = result;\n      this._inputEl.value = result.place_name;\n      this._change();\n    }.bind(this));\n  }\n\n  _setInput(input) {\n    if (!input) return;\n    if (typeof input === 'object' && input.length) {\n      input = [\n        utils.roundWithOriginalPrecision(utils.wrap(input[0]), input[0]),\n        utils.roundWithOriginalPrecision(utils.wrap(input[1]), input[1])\n      ].join();\n    }\n\n    // Set input value to passed value and clear everything else.\n    this._inputEl.value = input;\n    this._input = null;\n    this._typeahead.selected = null;\n    this._typeahead.clear();\n    this._change();\n  }\n\n  _clear() {\n    this._input = null;\n    this._inputEl.value = '';\n    this._typeahead.selected = null;\n    this._typeahead.clear();\n    this._change();\n    this._inputEl.focus();\n    this._clearEl.classList.remove('active');\n    this.fire('clear');\n  }\n\n  getResult() {\n    return this._input;\n  }\n\n  /**\n   * Set & query the input\n   * @param {Array|String} query An array of coordinates [lng, lat] or location name as a string.\n   * @returns {Geocoder} this\n   */\n  query(query) {\n    this._query(query);\n    return this;\n  }\n\n  /**\n   * Set input\n   * @param {Array|String} value An array of coordinates [lng, lat] or location name as a string. Calling this function just sets the input and does not trigger an API request.\n   * @returns {Geocoder} this\n   */\n  setInput(value) {\n    this._setInput(value);\n    return this;\n  }\n\n  /**\n   * Subscribe to events that happen within the plugin.\n   * @param {String} type name of event. Available events and the data passed into their respective event objects are:\n   *\n   * - __clear__ `Emitted when the input is cleared`\n   * - __loading__ `Emitted when the geocoder is looking up a query`\n   * - __results__ `{ results } Fired when the geocoder returns a response`\n   * - __result__ `{ result } Fired when input is set`\n   * - __error__ `{ error } Error as string`\n   * @param {Function} fn function that's called when the event is emitted.\n   * @returns {Geocoder} this;\n   */\n  on(type, fn) {\n    this._ev.on(type, fn);\n    this._ev.on('error', function (err) {\n      console.log(err);\n    });\n    return this;\n  }\n  /**\n   * Fire an event\n   * @param {String} type event name.\n   * @param {Object} data event data to pass to the function subscribed.\n   * @returns {Geocoder} this\n   */\n  fire(type, data) {\n    this._ev.emit(type, data);\n    return this;\n  }\n\n  /**\n   * Remove an event\n   * @returns {Geocoder} this\n   * @param {String} type Event name.\n   * @param {Function} fn Function that should unsubscribe to the event emitted.\n   */\n  off(type, fn) {\n    this._ev.removeListener(type, fn);\n    return this;\n  }\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}